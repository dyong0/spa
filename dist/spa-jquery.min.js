/*! spa-jquery 2016-09-24 */
!function(){var a=require("jquery");module.exports={Component:null,State:null,run:function(b){var c=this;a(document).ready(function(){c.Component.onReady(b).then(function(){c.State.onReady(b)})})}}}(),function(){var a=a?a:require("promise-polyfill"),b=require("jquery"),c={rootComponent:null,definitions:{},rawHtmls:{},rootPath:"components"};c.define=function(a,b){if("root"===a.toLowerCase())throw new Error("Root component is already defined.");this.definitions[a]=b},c.setRootPath=function(a){return"/"===a[a.length-1]?void(this.rootPath=a.slice(0,-1)):void(this.rootPath=a)},c.loadComponent=function(c){if(this.definitions[c]&&this.rawHtmls[c])return a.resolve({def:this.definitions[c],rawHtml:this.rawHtmls[c]});var d=this,e=d.rootPath+"/"+c.replace(/\./g,"/");return new a(function(a){b.get(e+".html",function(b){d.rawHtmls[c]=b,a({def:d.definitions[c],rawHtml:d.rawHtmls[c]})})})},c.create=function(c){function d(){return e.loadComponent(c).then(function(a){return b.extend(b(a.rawHtml),a.def,f)}).then(function(a){if(a.events){var b=a.events;for(var c in b){var d=b[c];for(var e in d){var f=d[e];if("."===e)a.on(c,f.bind(a));else{var g=e;a.on(c,g,f.bind(a))}}}}return a})}var e=this,f={_root:!1,append:function(a){b.fn.append.apply(this,arguments),a.render()},prepend:function(){b.fn.prepend.apply(this,arguments),$child.render()},appendTo:function(){b.fn.appendTo.apply(this,arguemnts),this.render()},prependTo:function(){b.fn.prependTo.apply(this,arguemnts),this.render()},update:function(a){for(var b in a)void 0!==this[b]&&(this[b]=a[b]);this.render()},render:function(){}},g=d();return g.times=function(b){for(var c=[this],e=0;e<b-1;++e)c.push(d());return a.all(c)},g},c.definitions.Root={},c.rawHtmls.Root='<div id="root"></div>',c.getRootComponent=function(){return this.rootComponent},c.onReady=function(){var a=this;return a.create("Root").then(function(c){a.rootComponent=c,b("body").append(c)})},module.exports.Component=c}(),function(){var a=require("jquery"),b=require("url-pattern"),c={onEnter:function(a,b){b()},onState:function(a){},onExit:function(a){a()}},d={states:{INITIAL_STATE:c},currentState:c,defaultState:null};d.setDefaultState=function(a){this.defaultState=a},d.define=function(a,c){if(this.states[a])throw new Error('The state "'+a+'" exists already');c.urlPattern=new b(c.urlPattern),this.states[a]=c},d.onStateChange=function(a){0===a.indexOf("#")&&(a=a.slice(1)),d.translateState(this.currentState,d.findStateByHash(a),stateParams)},d.findStateByHash=function(a){var b=this.states;for(var c in b)if(b[c].urlPattern.match(a))return b[c];throw new Error("No state matching with "+a)},d.translateState=function(a,b,c){a.onExit(function(){d.currentState=b,b.onEnter(c,b.onState.bind(b))})},d.go=function(a,b){d.translateState(this.currentState,this.states[a],b)},a(window).on("hashchange",function(){d.onStateChange(decodeURI(window.location.hash))}),a(document).on("click","[sref]",function(){var b=a(this).attr("sref");if(b.indexOf("?")===-1)return void d.go(b);var c=b.slice(0,b.indexOf("?")),e=b.slice(b.indexOf("?")+1),f=JSON.parse('{"'+decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}');d.go(c,f)}),d.onReady=function(){var a=this;return new Promise(function(b){var c=decodeURI(window.location.hash);null!==c&&0!==c.length||a.go(a.defaultState),b()})},module.exports.State=d}();